<!DOCTYPE html>
<html>

<head>
    <title>Roads of Fate</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/theme.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/home.css') }}">
    <script defer src="{{ url_for('static', filename='theme.js') }}"></script>
</head>

<body>
    <div class="container">
        <h1>Welcome {% if user %}{{ user }}{% else %}Gast{% endif %}!</h1>
    <div class="main">
            {% if id == 0 %}
                <a href="{{ url_for('admin') }}">Admin Panel</a>
            {% endif %}
            <a href="{{ url_for('deck') }}">View your deck</a>
            <a href="{{ url_for('open_carddragger') }}">Card Dragger Test</a>
            <a href="{{ url_for('open_sheet') }}">Character sheet</a>
            <a href="{{ url_for('shame') }}">Hall of Shame</a>
            <a href="{{ url_for('userSettings', username=user) }}">Settings</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </div>

</body>
</body>

<script>
    (function(){
        const root = document.documentElement;
        const select = document.getElementById('theme-select');
        const stored = localStorage.getItem('theme') || 'dark';
        root.setAttribute('data-theme', stored === 'dark' ? '' : stored);
        // For default theme, prefer removing attribute; else set value
        if (stored === 'dark') {
            root.removeAttribute('data-theme');
            select.value = 'dark';
        } else {
            root.setAttribute('data-theme', stored);
            select.value = stored;
        }
        select.addEventListener('change', () => {
            const val = select.value;
            if (val === 'dark') {
                root.removeAttribute('data-theme');
            } else {
                root.setAttribute('data-theme', val);
            }
            localStorage.setItem('theme', val);
        });
    })();
</script>
</html>